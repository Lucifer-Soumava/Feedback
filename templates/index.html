<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Feedback Form</title>
  <link rel="stylesheet" href="../static/style.css" />
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
</head>
<body>
  <div class="container">
    <form id="feedbackForm">
      <h2>ðŸŒŸ Share Your Feedback</h2>
      <input type="text" name="name" placeholder="ðŸ‘¤ Your Name" required />
      <input type="email" name="email" placeholder="ðŸ“§ Your Email" required />
      <textarea name="message" rows="4" placeholder="ðŸ’¬ Your Feedback" required></textarea>

      <h3 style="text-align:center; margin-top:10px;">Rate Us</h3>
      <div class="stars">
        <input type="radio" id="star5" name="rating" value="5" />
        <label for="star5">â˜…</label>
        <input type="radio" id="star4" name="rating" value="4" />
        <label for="star4">â˜…</label>
        <input type="radio" id="star3" name="rating" value="3" />
        <label for="star3">â˜…</label>
        <input type="radio" id="star2" name="rating" value="2" />
        <label for="star2">â˜…</label>
        <input type="radio" id="star1" name="rating" value="1" required />
        <label for="star1">â˜…</label>
      </div>

      <button type="submit">ðŸš€ Submit Feedback</button>
    </form>
  </div>

  <!-- Popup Modal -->
  <div id="popup" class="popup">
    <div class="popup-content">
      <h2>âœ… Thank you for your feedback!</h2>
      <div class="center-actions">
        <button onclick="closePopup()">Close</button>
      </div>
    </div>
  </div>

  <script>
    const form = document.getElementById("feedbackForm");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      const formData = new FormData(form);
      const res = await fetch("/feedback", { method: "POST", body: formData });
      const json = await res.json();
      if (json.status === "success") {
        // Show popup
        document.getElementById("popup").style.display = "flex";
        // Reset form
        form.reset();
        // ðŸŽ‰ Confetti
        confetti({
          particleCount: 160,
          spread: 80,
          origin: { y: 0.65 }
        });
      }
    });

    function closePopup() {
      document.getElementById("popup").style.display = "none";
    }
  </script>
</body>
</html>
